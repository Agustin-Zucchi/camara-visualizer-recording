<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Vigilancia</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>游닟</text></svg>">
</head>
<body>
    <!-- T칤tulo principal -->
    <div class="title">
        <h1>Sistema de Vigilancia</h1>
        <div class="control-buttons">
            <button id="stop-recording-btn" class="recording-btn" title="Detener grabaciones activas">
                游꿘 Detener Grabaci칩n
            </button>
            <button id="stop-system-btn" class="stop-btn" title="Detener sistema completo">
                游띔 Detener Sistema
            </button>
        </div>
    </div>

    <!-- Vista de Cuadr칤cula (Vista por defecto) -->
    <div id="grid-view">
        {% if cameras %}
            <div class="camera-grid">
                {% for camera in cameras %}
                    <div class="camera-container" 
                         data-camera-id="{{ camera.id }}" 
                         data-camera-name="{{ camera.name }}">
                        
                        <img src="/video_feed/{{ camera.id }}" 
                             alt="{{ camera.name }}" 
                             class="camera-stream"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        
                        <div class="camera-loading" style="display: none;">
                            <div class="spinner"></div>
                            <div>Conectando...</div>
                        </div>
                        
                        <div class="camera-name">{{ camera.name }}</div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div style="text-align: center; color: rgba(255, 255, 255, 0.7); font-size: 1.2em;">
                <h2>No hay c치maras configuradas</h2>
                <p>Por favor, configura al menos una c치mara en el archivo config.json</p>
            </div>
        {% endif %}
    </div>

    <!-- Vista de Enfoque (Pantalla completa) -->
    <div id="focus-view" class="hidden">
        <div class="focus-container">
            <div class="focus-header">
                <div class="focus-info">
                    <h2 id="focus-title">Nombre de la C치mara</h2>
                    <p id="focus-subtitle">ID de la c치mara</p>
                </div>
                <button id="back-button" title="Volver a la cuadr칤cula">&times;</button>
            </div>
            <img id="focus-image" class="focus-stream" alt="Stream de c치mara">
        </div>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>